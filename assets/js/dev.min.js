function loadJS(A,e,t){var o=!!window.ActiveXObject,i=o&&!window.XMLHttpRequest,a=document.createElement("script"),n=i?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,e&&e())}:a.onload=function(){e&&e()},a.src=A,t?document.getElementById(t).appendChild(a):n.insertBefore(a,n.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var A=$(window),e={top:A.scrollTop(),left:A.scrollLeft()};e.right=e.left+A.width(),e.bottom=e.top+A.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}});var duoshuoQuery={short_name:"luolei"},GlobalConfigue={masterDomain:"https://luolei.org"},General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var A=window,e=(A.document,navigator.userAgent.toLowerCase()),t=A.navigator.appVersion.match(/android/gi);A.navigator.appVersion.match(/iphone/gi);"micromessenger"==e.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos(),General.arrowEvent()},updateImageWidth:function(){function A(){var A=$(this),e=t.outerWidth(),o=this.naturalWidth;o>=e?A.addClass("full-img"):A.removeClass("full-img")}function e(){o.each(A)}var t=$(".post-content"),o=$(".single-post-inner img").on("load",A);e()},webFontLoader:function(){WebFontConfig={loading:function(){console.log("loading font")},custom:{families:["Exo","iconfont"],urls:[General.absUrl+"/assets/css/font.min.css","https://disqus.earthc.moe/dist/iDisqus.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Exo","iconfont"]}})})},arrowEvent:function(){$(".arrow_down").click(function(){return $("html,body").animate({scrollTop:$(window).height()-20},600,function(){window.location.hash="#"}),!1})},scrollToPos:function(A){var e="我要飞到最高",t=(A||$(window).height(),$('<a href="#" id="to-top" title="'+e+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(A){A.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(A){var e,t,o="iconfont",i={twitter:o+"-twitter",qzone:o+"-qzone",weibo:o+"-weibo",facebook:o+"-facebook",github:o+"-github",douban:o+"-douban",google:o+"-google",luolei:o+"-luolei",dribble:o+"-dribble",v2ex:o+"-v2ex",zhihu:o+"-zhihu",wikipedia:o+"-wikipedia",jianshu:o+"-jianshu",youku:o+"-youku",youtube:o+"-youtube"};for(var a in i)if("function"!=typeof i[a]){var n=a;A.indexOf(n)>=0&&(e=n,t=i[n])}return t},extractHostname:function(A){var e;return e=A.indexOf("://")>-1?A.split("/")[2]:A.split("/")[0],e=e.split(":")[0],e=e.split("?")[0]},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(A){var e=$(this).attr("href"),t=document.createElement("a");t.href=e,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),console.log(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var o=$(this).find("i").css("color"),i=$(this).css("color");$(this).hover(function(){$(this).css("color",o),$(this).addClass("animated pulse")},function(){$(this).css("color",i),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var A={alipay:"/assets/images/qr-alipay-256.png",wechat:"/assets/images/qr-wechat-256.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){console.log("悬浮"),$("img.wechat-img").attr("src",A.wechat),$("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",A.wechat),$(this).find("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})},commentLoader:function(){if(!$("body").hasClass("post-template"))return!1;GlobalConfigue.masterDomain+location.pathname;$(window).scroll(function(){$(".author-image").isOnScreenVisible()&&!$(".author-image").hasClass("comment-loaded")&&($(".author-image").addClass("comment-loaded"),loadJS("https://disqus.earthc.moe/dist/iDisqus.min.js",function(){new iDisqus("disqus_comment",{forum:"blog-earthc-moe",api:"https://disqus.earthc.moe/api",site:"https://blog.earthc.moe",mode:3,timeout:200,init:!0,auto:!0})}))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(A,e){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="};console.log("支持Webp哦");var o=new Image;o.onload=function(){o.width>0&&o.height>0;console.log("支持Webp"),ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},o.onerror=function(){console.log("不支持Webp"),ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},o.src="data:image/webp;base64,"+t.demo},imgLoader:function(){console.log("加载默认图片")},webPLoader:function(){if(console.log("加载webP"),1==ImageSmartLoader.isWebPSupported){if(console.log("宽度是"+General.viewWidth),768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var A=$(window);$.fn.lazyload=function(e){function t(){var A=0;i.each(function(){var e=$(this);if(!a.skip_invisible||e.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++A>a.failure_limit)return!1}else e.trigger("appear"),A=0})}var o,i=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,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",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),$.extend(a,e)),o=void 0===a.container||a.container===window?A:$(a.container),0===a.event.indexOf("scroll")&&o.bind(a.event,function(){return t()}),this.each(function(){var A=this,e=$(A);A.loaded=!1,void 0!==e.attr("src")&&e.attr("src")!==!1||e.is("img")&&(e.attr("src",a.placeholder),e.addClass("loading")),e.one("appear",function(){if(!this.loaded){if(a.appear){var t=i.length;a.appear.call(A,t,a)}var o=e.attr("data-"+a.data_attribute);(o.indexOf("upaiyun")>-1||o.indexOf("file.is26.com")>-1)&&(1==a.advanced_load&&(o+="!"),1==a.is_scale&&(o+="/fw/"+a.scale_width),1==a.webP_load&&(o+="/format/webp")),$("<img />").bind("load",function(){e.hide(),e.is("img")?e.attr("src",o):e.css("background-image","url('"+o+"')"),e[a.effect](a.effect_speed),A.loaded=!0;var t=$.grep(i,function(A){return!A.loaded});if(i=$(t),a.load){var n=i.length;a.load.call(A,n,a)}e.removeClass("loading")}).attr("src",o)}}),0!==a.event.indexOf("scroll")&&e.bind(a.event,function(){A.loaded||e.trigger("appear")})}),A.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&A.bind("pageshow",function(A){A.originalEvent&&A.originalEvent.persisted&&i.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(e,t){var o;return o=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:A.height())+A.scrollTop():$(t.container).offset().top+$(t.container).height(),o<=$(e).offset().top-t.threshold},$.rightoffold=function(e,t){var o;return o=void 0===t.container||t.container===window?A.width()+A.scrollLeft():$(t.container).offset().left+$(t.container).width(),o<=$(e).offset().left-t.threshold},$.abovethetop=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollTop():$(t.container).offset().top,o>=$(e).offset().top+t.threshold+$(e).height()},$.leftofbegin=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollLeft():$(t.container).offset().left,o>=$(e).offset().left+t.threshold+$(e).width()},$.inviewport=function(A,e){return!($.rightoffold(A,e)||$.leftofbegin(A,e)||$.belowthefold(A,e)||$.abovethetop(A,e))},$.extend($.expr[":"],{"below-the-fold":function(A){return $.belowthefold(A,{threshold:0})},"above-the-top":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-screen":function(A){return $.rightoffold(A,{threshold:0})},"left-of-screen":function(A){return!$.rightoffold(A,{threshold:0})},"in-viewport":function(A){return $.inviewport(A,{threshold:0})},"above-the-fold":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-fold":function(A){return $.rightoffold(A,{threshold:0})},"left-of-fold":function(A){return!$.rightoffold(A,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&(General.addIcons(),General.commentLoader())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsibG9hZEpTIiwidXJsIiwiY2FsbGJhY2siLCJlbCIsImlzSUUiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiaXNJRTYiLCJYTUxIdHRwUmVxdWVzdCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInR5cGUiLCJhc3luYyIsInJlYWR5U3RhdGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmxvYWQiLCJzcmMiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIiQiLCJmbiIsImV4dGVuZCIsImlzT25TY3JlZW5WaXNpYmxlIiwiaGFzQ2xhc3MiLCJ3aW4iLCJ2aWV3cG9ydCIsInRvcCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImhlaWdodCIsImJvdW5kcyIsInRoaXMiLCJvZmZzZXQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJkdW9zaHVvUXVlcnkiLCJzaG9ydF9uYW1lIiwiR2xvYmFsQ29uZmlndWUiLCJtYXN0ZXJEb21haW4iLCJHZW5lcmFsIiwiaXNNb2JpbGUiLCJpc1dlY2hhdCIsInZpZXdXaWR0aCIsImFic1VybCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiaW5pdCIsIlVBIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpc0FuZHJvaWQiLCJhcHBWZXJzaW9uIiwibWF0Y2giLCJhZGRDbGFzcyIsInVwZGF0ZUltYWdlV2lkdGgiLCJyZXdhcmRMb2FkZXIiLCJ3ZWJGb250TG9hZGVyIiwic2Nyb2xsVG9Qb3MiLCJhcnJvd0V2ZW50IiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwicmVtb3ZlQ2xhc3MiLCJjYXNwZXJGdWxsSW1nIiwiJGltZyIsImVhY2giLCJvbiIsIldlYkZvbnRDb25maWciLCJsb2FkaW5nIiwiY29uc29sZSIsImxvZyIsImN1c3RvbSIsImZhbWlsaWVzIiwidXJscyIsIldlYkZvbnQiLCJsb2FkIiwiY2xpY2siLCJhbmltYXRlIiwiaGFzaCIsInBvc2l0aW9uIiwiU1RSX1RPX1RPUCIsImJ1dHRvbiIsImFwcGVuZFRvIiwic2Nyb2xsIiwiZmFkZUluIiwiZmFkZU91dCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybEljb25saXplIiwiZG9tYWluIiwiX291dHB1dCIsImljb25Gb250VGFnIiwiaWNvbk1hcCIsInR3aXR0ZXIiLCJxem9uZSIsIndlaWJvIiwiZmFjZWJvb2siLCJnaXRodWIiLCJkb3ViYW4iLCJnb29nbGUiLCJsdW9sZWkiLCJkcmliYmxlIiwidjJleCIsInpoaWh1Iiwid2lraXBlZGlhIiwiamlhbnNodSIsInlvdWt1IiwieW91dHViZSIsIm5hbWUiLCJNYXBLZXkiLCJpbmRleE9mIiwiZXh0cmFjdEhvc3RuYW1lIiwiaG9zdG5hbWUiLCJzcGxpdCIsImFkZEljb25zIiwiaSIsIl9zcmMiLCJhdHRyIiwidG1wIiwiaHJlZiIsIl9zZWxmRG9tYWluIiwicHJlcGVuZCIsIl9zZWxmQ29sb3IiLCJmaW5kIiwiY3NzIiwiX29yaWdpbmFsQ29sb3IiLCJob3ZlciIsImxvYWRRUiIsImFsaXBheSIsIndlY2hhdCIsImh0bWwiLCJjb21tZW50TG9hZGVyIiwicGF0aG5hbWUiLCJpRGlzcXVzIiwiZm9ydW0iLCJhcGkiLCJzaXRlIiwibW9kZSIsInRpbWVvdXQiLCJhdXRvIiwiSW1hZ2VTbWFydExvYWRlciIsImlzV2ViUFN1cHBvcnRlZCIsImlzSW1hZ2VDb21wcmVzc2VkIiwid2ViUENoZWNrIiwiaXNDb21wcmVzc2VkQ2hlY2siLCJmZWF0dXJlIiwiVGVzdEltYWdlcyIsImRlbW8iLCJpbWciLCJJbWFnZSIsIndlYlBMb2FkZXIiLCJvbmVycm9yIiwiaW1nTG9hZGVyIiwibGF6eWxvYWQiLCJhZHZhbmNlZF9sb2FkIiwiZGF0YV9hdHRyaWJ1dGUiLCJ3ZWJQX2xvYWQiLCJpc19zY2FsZSIsInNjYWxlX3dpZHRoIiwicmVhZHkiLCIkd2luZG93Iiwib3B0aW9ucyIsInVwZGF0ZSIsImNvdW50ZXIiLCJlbGVtZW50cyIsInNldHRpbmdzIiwic2tpcF9pbnZpc2libGUiLCJpcyIsImFib3ZldGhldG9wIiwibGVmdG9mYmVnaW4iLCJiZWxvd3RoZWZvbGQiLCJyaWdodG9mZm9sZCIsImZhaWx1cmVfbGltaXQiLCJ0cmlnZ2VyIiwiJGNvbnRhaW5lciIsInRocmVzaG9sZCIsImV2ZW50IiwiZWZmZWN0IiwiY29udGFpbmVyIiwiYXBwZWFyIiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWQiLCJmYWlsdXJlbGltaXQiLCJlZmZlY3RzcGVlZCIsImVmZmVjdF9zcGVlZCIsImJpbmQiLCJzZWxmIiwiJHNlbGYiLCJsb2FkZWQiLCJvbmUiLCJlbGVtZW50c19sZWZ0IiwibGVuZ3RoIiwiY2FsbCIsInVwZGF0ZWRVcmwiLCJoaWRlIiwidGVtcCIsImdyZXAiLCJlbGVtZW50IiwidGVzdCIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJmb2xkIiwiaW5uZXJIZWlnaHQiLCJpbnZpZXdwb3J0IiwiZXhwciIsImJlbG93LXRoZS1mb2xkIiwiYSIsImFib3ZlLXRoZS10b3AiLCJyaWdodC1vZi1zY3JlZW4iLCJsZWZ0LW9mLXNjcmVlbiIsImluLXZpZXdwb3J0IiwiYWJvdmUtdGhlLWZvbGQiLCJyaWdodC1vZi1mb2xkIiwibGVmdC1vZi1mb2xkIl0sIm1hcHBpbmdzIjoiQUF1QkEsUUFBU0EsUUFBT0MsRUFBS0MsRUFBVUMsR0FDM0IsR0FBSUMsS0FBU0MsT0FBT0MsY0FDaEJDLEVBQVFILElBQVNDLE9BQU9HLGVBQ3hCQyxFQUFTQyxTQUFTQyxjQUFjLFVBQ2hDQyxFQUFPTCxFQUFRRyxTQUFTRyxnQkFBa0JILFNBQVNJLHFCQUFxQixRQUFRLEVB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OUVaLEVBQUVnTSxXQUFhLFNBQVNOLEVBQVNoQyxHQUU3QixRQUFRMUosRUFBRWdLLFlBQVkwQixFQUFTaEMsSUFBYzFKLEVBQUU4SixZQUFZNEIsRUFBU2hDLElBQy9EMUosRUFBRStKLGFBQWEyQixFQUFTaEMsSUFBYzFKLEVBQUU2SixZQUFZNkIsRUFBU2hDLEtBT3RFMUosRUFBRUUsT0FBT0YsRUFBRWlNLEtBQUssTUFDWkMsaUJBQWtCLFNBQVNDLEdBQ3ZCLE1BQU9uTSxHQUFFK0osYUFBYW9DLEdBQ2xCL0IsVUFBVyxLQUduQmdDLGdCQUFpQixTQUFTRCxHQUN0QixPQUFRbk0sRUFBRStKLGFBQWFvQyxHQUNuQi9CLFVBQVcsS0FHbkJpQyxrQkFBbUIsU0FBU0YsR0FDeEIsTUFBT25NLEdBQUVnSyxZQUFZbUMsR0FDakIvQixVQUFXLEtBR25Ca0MsaUJBQWtCLFNBQVNILEdBQ3ZCLE9BQVFuTSxFQUFFZ0ssWUFBWW1DLEdBQ2xCL0IsVUFBVyxLQUduQm1DLGNBQWUsU0FBU0osR0FDcEIsTUFBT25NLEdBQUVnTSxXQUFXRyxHQUNoQi9CLFVBQVcsS0FJbkJvQyxpQkFBa0IsU0FBU0wsR0FDdkIsT0FBUW5NLEVBQUUrSixhQUFhb0MsR0FDbkIvQixVQUFXLEtBR25CcUMsZ0JBQWlCLFNBQVNOLEdBQ3RCLE1BQU9uTSxHQUFFZ0ssWUFBWW1DLEdBQ2pCL0IsVUFBVyxLQUduQnNDLGVBQWdCLFNBQVNQLEdBQ3JCLE9BQVFuTSxFQUFFZ0ssWUFBWW1DLEdBQ2xCL0IsVUFBVyxPQUt2QjVJLFFBQVFRLE9BQ1JpRyxpQkFBaUJqRyxPQUNiaEMsRUFBRSxRQUFRSSxTQUFTLG1CQUNuQm9CLFFBQVErRSxXQUNSL0UsUUFBUWdHIiwiZmlsZSI6ImRldi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkLmZuLmV4dGVuZCh7XHJcblxyXG4gICAgaXNPblNjcmVlblZpc2libGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgd2luID0gJCh3aW5kb3cpO1xyXG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHtcclxuICAgICAgICAgICAgdG9wOiB3aW4uc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgIGxlZnQ6IHdpbi5zY3JvbGxMZWZ0KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZpZXdwb3J0LnJpZ2h0ID0gdmlld3BvcnQubGVmdCArIHdpbi53aWR0aCgpO1xyXG4gICAgICAgIHZpZXdwb3J0LmJvdHRvbSA9IHZpZXdwb3J0LnRvcCArIHdpbi5oZWlnaHQoKTtcclxuXHJcbiAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMub2Zmc2V0KCk7XHJcbiAgICAgICAgYm91bmRzLnJpZ2h0ID0gYm91bmRzLmxlZnQgKyB0aGlzLm91dGVyV2lkdGgoKTtcclxuICAgICAgICBib3VuZHMuYm90dG9tID0gYm91bmRzLnRvcCArIHRoaXMub3V0ZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICghKHZpZXdwb3J0LnJpZ2h0IDwgYm91bmRzLmxlZnQgfHwgdmlld3BvcnQubGVmdCA+IGJvdW5kcy5yaWdodCB8fCB2aWV3cG9ydC5ib3R0b20gPCBib3VuZHMudG9wIHx8IHZpZXdwb3J0LnRvcCA+IGJvdW5kcy5ib3R0b20pKTtcclxuICAgIH0sXHJcblxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGxvYWRKUyh1cmwsIGNhbGxiYWNrLCBlbCkge1xyXG4gICAgdmFyIGlzSUUgPSAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0LFxyXG4gICAgICAgIGlzSUU2ID0gaXNJRSAmJiAhd2luZG93LlhNTEh0dHBSZXF1ZXN0LFxyXG4gICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksXHJcbiAgICAgICAgaGVhZCA9IGlzSUU2ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xyXG4gICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcclxuICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSkge1xyXG4gICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIgfHwgc2NyaXB0LnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2NyaXB0LnNyYyA9IHVybDtcclxuICAgIGlmIChlbCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vKipcclxuICogWWFzdWtvIOmFjee9ruaWh+S7tlxyXG4gKiDlpJror7Tor4TorrrosIPnlKjnrYlcclxuICovXHJcblxyXG52YXIgZHVvc2h1b1F1ZXJ5ID0ge1xyXG4gICAgc2hvcnRfbmFtZTogXCJsdW9sZWlcIlxyXG59O1xyXG5cclxudmFyIEdsb2JhbENvbmZpZ3VlID0ge1xyXG4gICAgbWFzdGVyRG9tYWluOiAnaHR0cHM6Ly9sdW9sZWkub3JnJyxcclxufVxyXG5cclxuXHJcbnZhciBHZW5lcmFsID0ge1xyXG4gICAgaXNNb2JpbGU6IGZhbHNlLFxyXG4gICAgaXNXZWNoYXQ6IGZhbHNlLFxyXG4gICAgdmlld1dpZHRoOiAkKHdpbmRvdykud2lkdGgoKSxcclxuICAgIGFic1VybDogbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCxcclxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB3aW4gPSB3aW5kb3c7XHJcbiAgICAgICAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudDtcclxuICAgICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKClcclxuICAgICAgICB2YXIgaXNBbmRyb2lkID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9hbmRyb2lkL2dpKTtcclxuICAgICAgICB2YXIgaXNJUGhvbmUgPSB3aW4ubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL2lwaG9uZS9naSk7XHJcbiAgICAgICAgaWYgKFVBLm1hdGNoKC9NaWNyb01lc3Nlbmdlci9pKSA9PSBcIm1pY3JvbWVzc2VuZ2VyXCIpIHtcclxuICAgICAgICAgICAgR2VuZXJhbC5pc1dlY2hhdCA9IHRydWU7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnd2VjaGF0LXdlYnZpZXcnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISFpc0FuZHJvaWQpIHtcclxuICAgICAgICAgICAgR2VuZXJhbC5pc01vYmlsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xyXG4gICAgICAgICAgICBHZW5lcmFsLnVwZGF0ZUltYWdlV2lkdGgoKTtcclxuICAgICAgICAgICAgR2VuZXJhbC5yZXdhcmRMb2FkZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdlbmVyYWwud2ViRm9udExvYWRlcigpO1xyXG4gICAgICAgIEdlbmVyYWwuc2Nyb2xsVG9Qb3MoKTtcclxuICAgICAgICBHZW5lcmFsLmFycm93RXZlbnQoKTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVJbWFnZVdpZHRoOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgJHBvc3RDb250ZW50ID0gJChcIi5wb3N0LWNvbnRlbnRcIik7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUltYWdlV2lkdGgoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBjb250ZW50V2lkdGggPSAkcG9zdENvbnRlbnQub3V0ZXJXaWR0aCgpLCAvLyBXaWR0aCBvZiB0aGUgY29udGVudFxyXG4gICAgICAgICAgICAgICAgaW1hZ2VXaWR0aCA9IHRoaXMubmF0dXJhbFdpZHRoOyAvLyBPcmlnaW5hbCBpbWFnZSByZXNvbHV0aW9uXHJcblxyXG4gICAgICAgICAgICBpZiAoaW1hZ2VXaWR0aCA+PSBjb250ZW50V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdmdWxsLWltZycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2Z1bGwtaW1nJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciAkaW1nID0gJChcIi5zaW5nbGUtcG9zdC1pbm5lciBpbWdcIikub24oJ2xvYWQnLCB1cGRhdGVJbWFnZVdpZHRoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FzcGVyRnVsbEltZygpIHtcclxuICAgICAgICAgICAgJGltZy5lYWNoKHVwZGF0ZUltYWdlV2lkdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FzcGVyRnVsbEltZygpO1xyXG4gICAgfSxcclxuICAgIHdlYkZvbnRMb2FkZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIFdlYkZvbnRDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgZm9udCcpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGN1c3RvbToge1xyXG4gICAgICAgICAgICAgICAgZmFtaWxpZXM6IFsnRXhvJywgJ2ljb25mb250J10sXHJcbiAgICAgICAgICAgICAgICB1cmxzOiBbR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9jc3MvZm9udC5taW4uY3NzJywnaHR0cHM6Ly9kaXNxdXMuZWFydGhjLm1vZS9kaXN0L2lEaXNxdXMubWluLmNzcyddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL3dlYmZvbnQuanMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgV2ViRm9udC5sb2FkKHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbToge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhbWlsaWVzOiBbJ0V4bycsICdpY29uZm9udCddXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgYXJyb3dFdmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnLmFycm93X2Rvd24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQod2luZG93KS5oZWlnaHQoKSAtIDIwXHJcbiAgICAgICAgICAgIH0sIDYwMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIC8v5bmz5ruR5rua5Yqo5Yiw6aG26YOoXHJcbiAgICBzY3JvbGxUb1BvczogZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgU1RSX1RPX1RPUCA9ICfmiJHopoHpo57liLDmnIDpq5gnLFxyXG4gICAgICAgICAgICBjb3ZlckhlaWdodCA9IHBvc2l0aW9uIHx8ICQod2luZG93KS5oZWlnaHQoKTsgLy/ojrflvpflm77niYfpq5jluqZcclxuICAgICAgICB2YXIgYnV0dG9uID0gJCgnPGEgaHJlZj1cIiNcIiBpZD1cInRvLXRvcFwiIHRpdGxlPVwiJyArIFNUUl9UT19UT1AgKyAnXCI+IDxkaXYgY2xhc3M9XCJ0by10b3Atd3JhcFwiPjwvZGl2PjwvYT4nKS5hcHBlbmRUbygnYm9keScpO1xyXG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAkKHdpbmRvdykuaGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5mYWRlSW4oNTAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5mYWRlT3V0KDUwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYnV0dG9uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogMFxyXG4gICAgICAgICAgICB9LCA2NjYsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgLyrnu5nmlofnq6DkuK3nmoR1cmzmt7vliqBpY29uZm9udOaWueS+v+ivhuWIqyovXHJcbiAgICB1cmxJY29ubGl6ZTogZnVuY3Rpb24odXJsKSB7XHJcbiAgICAgICAgdmFyIGRvbWFpbixcclxuICAgICAgICAgICAgX291dHB1dDtcclxuICAgICAgICB2YXIgaWNvbkZvbnRUYWcgPSAnaWNvbmZvbnQnO1xyXG4gICAgICAgIHZhciBpY29uTWFwID0geyAvKue0ouW8lSDlj6/lnKjov5nph4zmt7vliqDljLnphY3op4TliJkqL1xyXG4gICAgICAgICAgICAndHdpdHRlcic6IGljb25Gb250VGFnICsgJy10d2l0dGVyJyxcclxuICAgICAgICAgICAgJ3F6b25lJzogaWNvbkZvbnRUYWcgKyAnLXF6b25lJyxcclxuICAgICAgICAgICAgJ3dlaWJvJzogaWNvbkZvbnRUYWcgKyAnLXdlaWJvJyxcclxuICAgICAgICAgICAgJ2ZhY2Vib29rJzogaWNvbkZvbnRUYWcgKyAnLWZhY2Vib29rJyxcclxuICAgICAgICAgICAgJ2dpdGh1Yic6IGljb25Gb250VGFnICsgJy1naXRodWInLFxyXG4gICAgICAgICAgICAnZG91YmFuJzogaWNvbkZvbnRUYWcgKyAnLWRvdWJhbicsXHJcbiAgICAgICAgICAgICdnb29nbGUnOiBpY29uRm9udFRhZyArICctZ29vZ2xlJyxcclxuICAgICAgICAgICAgJ2x1b2xlaSc6IGljb25Gb250VGFnICsgJy1sdW9sZWknLFxyXG4gICAgICAgICAgICAnZHJpYmJsZSc6IGljb25Gb250VGFnICsgJy1kcmliYmxlJyxcclxuICAgICAgICAgICAgJ3YyZXgnOiBpY29uRm9udFRhZyArICctdjJleCcsXHJcbiAgICAgICAgICAgICd6aGlodSc6IGljb25Gb250VGFnICsgJy16aGlodScsXHJcbiAgICAgICAgICAgICd3aWtpcGVkaWEnOiBpY29uRm9udFRhZyArICctd2lraXBlZGlhJyxcclxuICAgICAgICAgICAgJ2ppYW5zaHUnOiBpY29uRm9udFRhZyArICctamlhbnNodScsXHJcbiAgICAgICAgICAgICd5b3VrdSc6IGljb25Gb250VGFnICsgJy15b3VrdScsXHJcbiAgICAgICAgICAgICd5b3V0dWJlJzogaWNvbkZvbnRUYWcgKyAnLXlvdXR1YmUnXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpY29uTWFwKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWNvbk1hcFtuYW1lXSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIE1hcEtleSA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoTWFwS2V5KSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluID0gTWFwS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIF9vdXRwdXQgPSBpY29uTWFwW01hcEtleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfb3V0cHV0O1xyXG4gICAgfSxcclxuXHRcclxuXHQgICAgLy8g6I635b6X6Lev5b6E5Lit55qEZG9tYWluXHJcbiAgICBleHRyYWN0SG9zdG5hbWU6IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICAgIHZhciBob3N0bmFtZTtcclxuICAgICAgICAvL2ZpbmQgJiByZW1vdmUgcHJvdG9jb2wgKGh0dHAsIGZ0cCwgZXRjLikgYW5kIGdldCBob3N0bmFtZVxyXG5cclxuICAgICAgICBpZiAodXJsLmluZGV4T2YoXCI6Ly9cIikgPiAtMSkge1xyXG4gICAgICAgICAgICBob3N0bmFtZSA9IHVybC5zcGxpdCgnLycpWzJdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGhvc3RuYW1lID0gdXJsLnNwbGl0KCcvJylbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vZmluZCAmIHJlbW92ZSBwb3J0IG51bWJlclxyXG4gICAgICAgIGhvc3RuYW1lID0gaG9zdG5hbWUuc3BsaXQoJzonKVswXTtcclxuICAgICAgICAvL2ZpbmQgJiByZW1vdmUgXCI/XCJcclxuICAgICAgICBob3N0bmFtZSA9IGhvc3RuYW1lLnNwbGl0KCc/JylbMF07XHJcblxyXG4gICAgICAgIHJldHVybiBob3N0bmFtZTtcclxuICAgIH0sXHJcblxyXG4gICAgYWRkSWNvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8q57uZ5Y2a5a6i5paH56ug5Zyw5Z2AdXJs5re75YqgaWNv6K+G5YirKi9cclxuICAgICAgICAkKCcuc2luZ2xlLXBvc3QtaW5uZXIgIGE6bm90KDpoYXMoaW1nKSknKS5lYWNoKGZ1bmN0aW9uKGkpIHtcclxuICAgICAgICAgICAgdmFyIF9zcmMgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgdmFyIHRtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgdG1wLmhyZWYgPSBfc3JjO1xyXG4gICAgICAgICAgICBfc2VsZkRvbWFpbiA9IHRtcC5ob3N0bmFtZTtcclxuICAgICAgICAgICAgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9zZWxmRG9tYWluKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wcmVwZW5kKCc8aSBjbGFzcz1cImljb25mb250ICcgKyBHZW5lcmFsLnVybEljb25saXplKF9zZWxmRG9tYWluKSArICdcIj48L2k+Jyk7XHJcbiAgICAgICAgICAgIHZhciBfc2VsZkNvbG9yID0gJCh0aGlzKS5maW5kKCdpJykuY3NzKCdjb2xvcicpLFxyXG4gICAgICAgICAgICAgICAgX29yaWdpbmFsQ29sb3IgPSAkKHRoaXMpLmNzcygnY29sb3InKTtcclxuXHJcbiAgICAgICAgICAgIC8q6byg5qCH5oKs5rWu5pe2Ki9cclxuICAgICAgICAgICAgJCh0aGlzKS5ob3ZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsIF9zZWxmQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZWQgcHVsc2UnKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCBfb3JpZ2luYWxDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy/miZPotY9cclxuICAgIHJld2FyZExvYWRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGxvYWRRUiA9IHtcclxuICAgICAgICAgICAgYWxpcGF5OiAnL2Fzc2V0cy9pbWFnZXMvcXItYWxpcGF5LTI1Ni5wbmcnLFxyXG4gICAgICAgICAgICB3ZWNoYXQ6ICcvYXNzZXRzL2ltYWdlcy9xci13ZWNoYXQtMjU2LnBuZydcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxvYWRRUlVybDtcclxuICAgICAgICBpZiAoISFHZW5lcmFsLmlzV2VjaGF0KSB7XHJcbiAgICAgICAgICAgICQoJy53ZWNoYXQtY29kZSBiJykuaHRtbCgn6ZW/5oyJ5LiK5pa55LqM57u056CB5omT6LWP5L2c6ICFJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcubW9uZXktbGlrZSAucmV3YXJkLWJ1dHRvbicpLmhvdmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5oKs5rWuJylcclxuICAgICAgICAgICAgJCgnaW1nLndlY2hhdC1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIud2VjaGF0KTtcclxuICAgICAgICAgICAgJCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcclxuICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlSW4oKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9LCA4MDApXHJcblxyXG4gICAgICAgICQoJy5tb25leS1saWtlIC5yZXdhcmQtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcud2VjaGF0LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi53ZWNoYXQpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcuYWxpcGF5LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi5hbGlwYXkpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVJbigpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgY29tbWVudExvYWRlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGFwcGlkID0gJ2N5dDF0SkhTSSc7XHJcbiAgICAgICAgdmFyIGNvbmYgPSAncHJvZF8yMTNkMjNlZmQ5YzM0NmYxZDg4NDk1MWVmZjRhNGVmZCc7XHJcblxyXG4gICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDov5nph4zorr7nva7or4Torrrnu4Tku7bnmoR0aHJlYWRJZFxyXG4gICAgICAgIHZhciBkYXRhVGhyZWFkS2V5ID0gR2xvYmFsQ29uZmlndWUubWFzdGVyRG9tYWluICsgbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5hdXRob3ItaW1hZ2UnKS5pc09uU2NyZWVuVmlzaWJsZSgpICYmICEkKCcuYXV0aG9yLWltYWdlJykuaGFzQ2xhc3MoJ2NvbW1lbnQtbG9hZGVkJykpIHtcclxuXHRcdFx0XHQkKCcuYXV0aG9yLWltYWdlJykuYWRkQ2xhc3MoJ2NvbW1lbnQtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICBsb2FkSlMoJ2h0dHBzOi8vZGlzcXVzLmVhcnRoYy5tb2UvZGlzdC9pRGlzcXVzLm1pbi5qcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXNxID0gbmV3IGlEaXNxdXMoJ2Rpc3F1c19jb21tZW50Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3J1bTogJ2Jsb2ctZWFydGhjLW1vZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaTogJ2h0dHBzOi8vZGlzcXVzLmVhcnRoYy5tb2UvYXBpJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZTogJ2h0dHBzOi8vYmxvZy5lYXJ0aGMubW9lJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMjAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG52YXIgSW1hZ2VTbWFydExvYWRlciA9IHtcclxuICAgIGlzV2ViUFN1cHBvcnRlZDogZmFsc2UsXHJcbiAgICBpc0ltYWdlQ29tcHJlc3NlZDogZmFsc2UsXHJcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBDaGVjaygpO1xyXG4gICAgfSxcclxuICAgIGlzQ29tcHJlc3NlZENoZWNrOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgd2ViUENoZWNrOiBmdW5jdGlvbihmZWF0dXJlLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBUZXN0SW1hZ2VzID0ge1xyXG4gICAgICAgICAgICBkZW1vOiBcIlVrbEdSa29BQUFCWFJVSlFWbEE0V0FvQUFBQVFBQUFBQUFBQUFBQUFRVXhRU0FzQUFBQUJCeEFSRVlpSS9nY0FBQUJXVURnZ0dBQUFBREFCQUowQktnRUFBUUFCQUJ3bHBBQURjQUQrL2diUUFBPT1cIlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+aUr+aMgVdlYnDlk6YnKTtcclxuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gKGltZy53aWR0aCA+IDApICYmIChpbWcuaGVpZ2h0ID4gMCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJwJyk7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCfmlK/mjIEnKVxyXG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4jeaUr+aMgVdlYnAnKTtcclxuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQTG9hZGVyKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFwiICsgVGVzdEltYWdlc1snZGVtbyddO1xyXG5cclxuICAgIH0sXHJcbiAgICBpbWdMb2FkZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfliqDovb3pu5jorqTlm77niYcnKTtcclxuICAgIH0sXHJcbiAgICB3ZWJQTG9hZGVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L29d2ViUCcpO1xyXG4gICAgICAgIC8vIGFsZXJ0KEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkKTtcclxuICAgICAgICBpZiAoSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5a695bqm5pivJyArIEdlbmVyYWwudmlld1dpZHRoKTtcclxuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoID09IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcclxuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcclxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXHJcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA9PSA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogMTUwMFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoIDwgNzY4KSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDc1MFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhbGVydCgn5pmu6YCa5pSv5oyBJylcclxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG5cclxuICAgICQuZm4ubGF6eWxvYWQgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcztcclxuICAgICAgICB2YXIgJGNvbnRhaW5lcjtcclxuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIHRocmVzaG9sZDogMCxcclxuICAgICAgICAgICAgZmFpbHVyZV9saW1pdDogMCxcclxuICAgICAgICAgICAgZXZlbnQ6IFwic2Nyb2xsXCIsXHJcbiAgICAgICAgICAgIGVmZmVjdDogXCJzaG93XCIsXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcjogd2luZG93LFxyXG4gICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogXCJvcmlnaW5hbFwiLFxyXG4gICAgICAgICAgICBza2lwX2ludmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGFwcGVhcjogbnVsbCxcclxuICAgICAgICAgICAgbG9hZDogbnVsbCxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoYmdBS0FJQUFBUC8vLy8vLy95SC9DMDVGVkZORFFWQkZNaTR3QXdFQUFBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FBQUNJSXlQcWN2dEQ2T2N0TnFMczk2OCt3K0c0a2lXNW9tbTZzcTI3Z3ZIOGxVQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptU0pHY2hCSkdicnZoc0N6SWNBMzNoN3pIT1EvMEFQZ1hjb0JJL0lTZ0t3SXlpU1VLUWdVSGhHcjlpc2RzdDlSUUFBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJENXd5VW1ydlRqcnpidi9ZQ2lPWkdsYUJuSVF5ZW0rOElVQTlDSEVlRTRlTkIzb3dPQ0cwRHNVaE1pa0pBSGdFUlRLYUZBUUtFQ2wyS3gyeTkxR0FBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFUG5ESlNhdTlPT3ZOdS85Z0tJNWthWllHY2hESjZiN3doUUQwSWNSNFRoNDBIZWpBNEliUU94U0V5S1FrQWVBUkZNcG9VQkFvUUtYWXJIYkxqVVVBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUStjTWxKcTcwNDY4MjcvMkFvam1ScG5waUJIRVNDdm5BOElVQjlDSEt1aDBkZEI3dWdFRVB3SFFyRFpESUI2QkVVeW1oUUVDaEFwZGlzZHNzTlJRQUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkQ1d3lVbXJ2VGpyemJ2L1lDaU9aR21lbllFY1JJSytjRHdoUUgwSWNxNkhSMTBIdTZBUVEvQWRDc05rTWdIb0VSVEthRkFRS0VDbDJLeDJ5K1ZFQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVVWERKU2F1OU9Pdk51LzlnS0k1a3VTVEVnUmhtaTZFcTY1WUNZQVBJckMvMW5lK2l3QUV3UEFCZEFhTE5lQVFWYmdCQzAvUlVTcWNlUllxWXdKSU0yMFBYMjFFVUFnSXl5WXhXdTkvd3VId2FBUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVUzREpTYXU5T092TnUvOWdLSTVrV1NiRWdSam1aaUFIa2JUMEtBQTRnTlFZa2g4Q25wQVRPQUNNaDJFbGh3c29uNVlDa3dDVkVJN0hRbldyU0IxbjFVU09vTmh5QzRHZ1dSQklsTTN3dUh4T2gwY0FBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSUWNNbEpxNzA0NjgyNy8yQW9qbVJwZWdseElNYVlydTBwejVjQTNBQWkycmhPLzdUQUFUQThpQUxFbXhISU5CVndBSUxvbVpRMnJ5S0ZpcGdRR2JhSExuYjhVUlFDQXBJWlRXNjczL0M0T3dJQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRlZ3eVVtcnZUanJ6YnYvWUNpT1pHbWVTMEljaUpFWnlFRWthRzEvQXFBRFNJYnNCOEZ0U0t3RURnRGtJYlBUQllyUVlhRkp5QkNTeVVKMGkxS3NralJNWWtkUWNNOGxSU0VnMUFnQ0NUTjZUcS9iNzZZSUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJTY01sSnE3MDQ2ODI3LzJBb2ptUnBubFpDSEloUnFheUx6clFvQURpQVVIZSsxOEJnSm5BQUZBK1VnQkdIRkRxZmhSeUFRSWt1cWM4c1VMRXlKaWlHN3VHckxjOFVoWURBZ2xhYjMvQzRmSDZLQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVhWERKU2F1OU9Pdk51LzlnS0k2a2x4QUhZcFNzWmlBSGtWUnZQTGVjQU93QWd2OFVCTzhnQ0E2TFFFemdBR0Fla2tEZUxrQmg4cWhRUzBGS3lPSUl6V2FCQXQ0ZHhsNktBdFc4cFVrSkhrRkJpVFBuYjNVaGdNeVRCQUVKZEJXQUJZTitpSW1LaTR4dkVRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFWTNESlNhdTlPT3ZOdS85Z0tJNWsyU1hFZ1JnbWg2b3M5YTV0alFsQURpRDJyZThVbkk3WEt5NENCMER5WUt3RWxEbm01SmxVTm51RkgrRTZ5VUszM1NnQXpEVXBVc3BFZVdGQUg5U1Q5aEsrTGlrS0FVRjljYzliK25wN2dvT0VoWVpGRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVhWERKU2F1OU9Pdk51LzlnS0k1a2FWb0pjU0RHYUNBSGtWUnZQSis0S1FBOGdJeUkza0ZBQ2ZLR3VhUW9jQUEwRDZNZUwwQnA5cWpLYktjZ0pZd0lUbWVCQWo2T3RlaU1RdVc4aFJJOWdvSUNiOHJUK0l1aUVDQ1NCQUVKY3hXQUJZTjVpSW1LaTR5TEVRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFWkhESlNhdTlPT3ZOdS85Z0tJNWthWUlKY1NDR2xxNHQ5YkpuYlY4Q29BTklsdSs5eVU4WHZCbHJnUU5BZWNnRWxycm01S2xjSHErbXdnNUF5R2loM2NsWEdjYWFRUXJWTXBFeHFBL3NpWnNaUDlzN2lrSkFzTW52TFg1OGQ0T0VoWWFIWnhFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCR2x3eVVtcnZUanJ6YnYvWUNpT1pHbVdDWEVnUm1VZ0I1RzRzSHplT0NjQVBJQlVpTjVCUUFueWhybWtVaEk0QUp5SFNvOFhvRGg3MWFYMlZKZ1NLb1RuczBBSkg4bmI5RWloZXM0b2lSNUJBUmZQMWZpUW9oQWdXZ1FCQ1hRVmdBV0RlWWlKaW91TU54RUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkhOd3lVbXJ2VGpyemJ2L1lDaU9wR2FVcUlrY1JHSWx4SUdjRkN6VGFZWGtQSVVBd0lPQUlnQUNkNU9pRWRtVEhKbzlJekJBQ1VpZkU2c1JDeVZBZVFUQVFWeWdGTVpqNzZRZ0ZxdWhybThxWVNRb0tJcVlPQzR4NkFGOGNvSWxBZ0VKZHhVS0JRRkRpWXVOZzVHU2s1U1ZsaFFSQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBU0FjTWxKcTcwNDY4MjcvMkFvam1SWkpjU0JHQ2FIcWl4bElBZVJWSE45dDZVQS9BQUVMK01EQ2lrSTRFR0FWREtIb3NBQk1EMUFMd0hxejBvQi9nS1VLUkI4QlJXOGhITGxyRTFUQ05wRDRhMmNxejJLRkhWM1h4ajBCM3dTQ1VBRUNoU0VVNFo5ZUFVQlQ0d0xDbzZRRkFJQkNZY1Zsd1dha1orZ29hS2pvQkVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJIMXd5VW1ydlRqcnpidi9ZQ2lPWkVrbXhJRVlvNEVjUkdLaEtrdlJxNmw3QXVBRGlCSGlkeEJRZXIvZ0JPbFQ3cDZZd0FFd1BZeCt2Z0FsZ0xWT3VFU28yRkxBRWtZRUtyVkFLVlFCNTBtNUdoL2JGU21xVEpUNEVSUVVlRlY3RWdaNUFJUjJZd29GQVVZa0FnRUpnQldNamhhV2o0cWJuSjJlbjZBaEVRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFZ0hESlNhdTlPT3ZOdS85Z0tJNWthV0lKY1NDR2xxNHRaU0FIa1ZSemZaOThLUUJBQUNMekN3NHBpT0JCZ0ZReWUxQlE0QUNnSGpLQkt2QktDUUlERkdvUUhDMXpDbDVDQnExVlV3amFRK0d0bkp2dkdJV3F1cnNZOWdkOUVnbEJCQW9VaEZTR2VJd1dDZ1VCVHhtUGtSY0NBUW1IRlpjRm1vMmZvS0dpbzU4UkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVIvY01sSnE3MDQ2ODI3LzJBb2ptUnBkZ2x4SUVabElBZVJXT25hVWpWNzd2d2lBRUFBb29JSUhnU1VYM0E0VVFLWnZhZ29jQUJVRDVVZ01FQUphTEVUcjFGS0JoVzBoQXJCYWkxUUNsZEFlbksrenN0NGpVSmxuZUdDQkFvVWUxZCtFZ1o4QUlaNWpCWUtCUUZJRmdJQkNZSVZqNUdPa0pLTm5wK2dvYUpTRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVnSERKU2F1OU9Pdk51LzlnS0k1a2FYWUdjaENKbFJBSFlsVHAybVp2UEo5OGlRREFnNEFpQUFJUmxWOXdlQ2tha2IxbzZHQUVCQ2lCNnFGU3RXS3l4cTEwM0NHRUM1UUNsVXFvbU5mb2l4ckFKdHMxQ1RxQW9LQVlZSFEzRTNsQWZCZ0tnQWVDZDR4RUFRVjlGUW9GQVV3VkFnRUprWWVVbG8yZm9LR2lvMk1SQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUjhjTWxKcTcwNDY4MjcvMkFvam1ScGVnbHhJRVpsSUFlUldPbmFpalY3N3B3QS9BQkVCUUU4Q0NnK29EQ1UvQzE1VUV2Z0FLQWVLc0JmZ0JMSVhrUGRZblJNS1dRSkZVSzFXaWhiQWVpUTJSb25qeFdxNm95U0FCSVVGSGhXZXlBR2VRQ0VkbEVLQlFGSEZnSUJDWUFWakk0a2xvK0ttNXlkbnArS0VRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFZkhESlNhdTlPT3ZOdS85Z0tJNWthWG9HY2hDSmxSQUhZbFRwMnA3YWUrQW5BdndIQVVYdyt5RXFQcUNRWnlIK21LVkRFUkNnQktZN3lwUUtyVnlmWFJHaGVDaFFDbElwb1RKT204TVNOQ0FML3lUbUFJS0NZb0ROYnhOM1AzcDFDd3AraFNBQ0FRVjdGUW9GQVVzVml3bU9oWkJWaVp1Y25aNmZGaEVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJHdHd5VW1ydlRqcnpidi9ZQ2lPWkdsK0NYRWdSbVVnQjVGWTZkcWVlSzRKUUE4Z0ZZVHZJS0R3ZkVDZGNya0lIQURQUThYWEMxQUNWQ2x6ZXlwUUNSVUNGRnFnRktJQU1IYzlVcWlnTTByQ1IxQlEzTkU0ZS85UkZBSkZGZ0lCQ1hZVmZvQjhpb3VNalk1ckVRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFYTNESlNhdTlPT3ZOdS85Z0tJNWthWDRHY2hDSmxSQUhZbWh2UEo5NGJpRkFmd2dVUWErSHlBaUhSWjB5ZHhnQ0FwU0E4NUNSRHFuTGJJbHdMVkFLelNZaFV3Q0V4OXAwS0dFR0VCUVVBOHpjd3NpYmdMcDYzeEVFQ25BVkNnVUJRQnFEaFh5S2k0eU5qbnNSQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUnBjTWxKcTcwNDY4MjcvMkFvam1ScGdnbHhJRVpsSUFlUmtPbmFubmdwQUR5QVZJamVRU0RhOVg2NVpDaHdBRFFQbFI0dklBcElvY3BzcHlBbFZBaE9aMEZVZUFLODJuUkdvWExPS0lrZVFTRmlQOS9xZkVWUkNCQXRBZ0VKZENOOGZucUlpWXFMakZvUkFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJyY01sSnE3MDQ2ODI3LzJBb2ptUnBnZ1p5RUltVkVBZGluTnNiejNSZUlVQi9DQlJCcjRmUVhZVERvdEY0R0FJQ2xJRHpzS3hJaDlScWpvQXRVQXJOSmtFN0tRRENZL0lwY1FZUUZCUUQ3TnhTeTV1QXV0b2tDQlRnRlFvRkFVQjdDNEtFaG9xTGpJMk9HQkVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJGVnd5VW1ydlRqcnpidi9ZQ2lPWkdtR0NYRWdSbVVnQjVHY2RHMEtRQTRnRmFJZkFwdHd5QWtjQU1kRFJaY0xFSi9RU1lGSnFCQ1F5RUowTzFTb2tETktRa2RRY004MVJTRVF0QWdDQ1RONlRxL2I3OXNJQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUlFjTWxKcTcwNDY4MjcvMkFvam1ScGhnWnlFSW1XcnUwcHp5RUMzSWVRMmJoTy84REw0WFlMWklaRVkzQVpKQkFQaFl3VEYyVmFad25Ba0tESUZKRGNxL2drQ0JTNm1uSUNQVzY3My9ENE5RSUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkZOd3lVbXJ2VGpyemJ2L1lDaU9aR21LQ1hFZ3htZ2dCNUdjZEkwSlFBNGdJNklmQXB2UUZqZ0FqSWVSTGhjWU9rMkZKV0ZFT0I0THo2eElvVHJPVURxQ1FrditLQXFCSUVrUVNJekw4TGg4VG45R0FBQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFVUhESlNhdTlPT3ZOdS85Z0tJNWthWW9HY2hESnVhVnI2ODRnQXR5SFFGODJydS9Bek9GMkN3UXBRNkx4eUp3UWlJZENjL0hFU2FmTUJHQklVRXdMeVM2MktRZ1V2Tmh5QWoxdXU5L3dPQ1lDQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUStjTWxKcTcwNDY4MjcvMkFvam1ScGpnbHhJTWJwdnJBbEFEU0F4SGhPQmdmUUg3cWdjRk9vQVFqRHBGS2lVUGtTeTZoUVVRZ0lwTmlzZHNzTlJnQUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkQ1d3lVbXJ2VGpyemJ2L1lDaU9aR21lUzBJY2lJRytjQ3dKUUEwZ2NxNkh3UUg0aDUxd2lDbllBQVNpVXFsWS9STExxRkJSQ0FpazJLeDJ5NFZGQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVQbkRKU2F1OU9Pdk51LzlnS0k1a2FaNWJRaHlJZ2I1d0xBbEFEU0J5cm9mQkFmaUhuWENJS2RnQUJLSlNxVmo5RXN1b1VGRUlDS1RZckhiTEJVVUFBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVJwbnFpVUVBZGlwSEFNQzBBTklIS3VoOEVCK0llZGNJZ3AyQUFFb2xLcFlQMFN5NmhRVVFnSXBOaXNkc3RkUkFBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDF3eVVtcnZUanJ6YnYvWUNpT1pHbWVxSmtRQjJLa2NBd0xRQTBnY3E2SHdRSDRoNTF3aUNuWUFBU2lVcWxnL1JMTHFGQlJDQWlrMkt4Mmk0b0FBRHM9XCIsXHJcbiAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc19zY2FsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5za2lwX2ludmlzaWJsZSAmJiAhJHRoaXMuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkLmFib3ZldGhldG9wKHRoaXMsIHNldHRpbmdzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICQubGVmdG9mYmVnaW4odGhpcywgc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90aGluZy4gKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoISQuYmVsb3d0aGVmb2xkKHRoaXMsIHNldHRpbmdzKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICEkLnJpZ2h0b2Zmb2xkKHRoaXMsIHNldHRpbmdzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJhcHBlYXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogaWYgd2UgZm91bmQgYW4gaW1hZ2Ugd2UnbGwgbG9hZCwgcmVzZXQgdGhlIGNvdW50ZXIgKi9cclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCsrY291bnRlciA+IHNldHRpbmdzLmZhaWx1cmVfbGltaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgLyogTWFpbnRhaW4gQkMgZm9yIGEgY291cGxlIG9mIHZlcnNpb25zLiAqL1xyXG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmZhaWx1cmVsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mYWlsdXJlX2xpbWl0ID0gb3B0aW9ucy5mYWlsdXJlbGltaXQ7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5mYWlsdXJlbGltaXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5lZmZlY3RzcGVlZCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5lZmZlY3Rfc3BlZWQgPSBvcHRpb25zLmVmZmVjdHNwZWVkO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZWZmZWN0c3BlZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIENhY2hlIGNvbnRhaW5lciBhcyBqUXVlcnkgYXMgb2JqZWN0LiAqL1xyXG4gICAgICAgICRjb250YWluZXIgPSAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpID8gJHdpbmRvdyA6ICQoc2V0dGluZ3MuY29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgLyogRmlyZSBvbmUgc2Nyb2xsIGV2ZW50IHBlciBzY3JvbGwuIE5vdCBvbmUgc2Nyb2xsIGV2ZW50IHBlciBpbWFnZS4gKi9cclxuICAgICAgICBpZiAoMCA9PT0gc2V0dGluZ3MuZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSkge1xyXG4gICAgICAgICAgICAkY29udGFpbmVyLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHNlbGYpO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5sb2FkZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8qIElmIG5vIHNyYyBhdHRyaWJ1dGUgZ2l2ZW4gdXNlIGRhdGE6dXJpLiAqL1xyXG4gICAgICAgICAgICBpZiAoJHNlbGYuYXR0cihcInNyY1wiKSA9PT0gdW5kZWZpbmVkIHx8ICRzZWxmLmF0dHIoXCJzcmNcIikgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHNldHRpbmdzLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hZGRDbGFzcyhcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gYXBwZWFyIGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlLiAqL1xyXG5cclxuICAgICAgICAgICAgJHNlbGYub25lKFwiYXBwZWFyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hcHBlYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmFwcGVhci5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRVcmwgPSAkc2VsZi5hdHRyKFwiZGF0YS1cIiArIHNldHRpbmdzLmRhdGFfYXR0cmlidXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5Zu+54mH5Zyw5Z2AJyArdXBkYXRlZFVybC5pbmRleE9mKCd1cGFpeXVuJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdDRE7lnLDlnYAnICt1cGRhdGVkVXJsLmluZGV4T2YoJ2ZpbGUuaXMyNi5jb20nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVcmwuaW5kZXhPZigndXBhaXl1bicpID4gLTEgfHwgdXBkYXRlZFVybC5pbmRleE9mKCdmaWxlLmlzMjYuY29tJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuYWR2YW5jZWRfbG9hZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICchJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuaXNfc2NhbGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnL2Z3LycgKyBzZXR0aW5ncy5zY2FsZV93aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2ViUF9sb2FkID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJy9mb3JtYXQvd2VicCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHVwZGF0ZWRVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCI8aW1nIC8+XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5iaW5kKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybCgnXCIgKyB1cGRhdGVkVXJsICsgXCInKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmW3NldHRpbmdzLmVmZmVjdF0oc2V0dGluZ3MuZWZmZWN0X3NwZWVkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVtb3ZlIGltYWdlIGZyb20gYXJyYXkgc28gaXQgaXMgbm90IGxvb3BlZCBuZXh0IHRpbWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9ICQuZ3JlcChlbGVtZW50cywgZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZWxlbWVudC5sb2FkZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gJCh0ZW1wKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubG9hZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c19sZWZ0ID0gZWxlbWVudHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmxvYWQuY2FsbChzZWxmLCBlbGVtZW50c19sZWZ0LCBzZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIHVwZGF0ZWRVcmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gd2FudGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlICovXHJcbiAgICAgICAgICAgIC8qIGJ5IHRyaWdnZXJpbmcgYXBwZWFyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICgwICE9PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkc2VsZi5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnRyaWdnZXIoXCJhcHBlYXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogQ2hlY2sgaWYgc29tZXRoaW5nIGFwcGVhcnMgd2hlbiB3aW5kb3cgaXMgcmVzaXplZC4gKi9cclxuICAgICAgICAkd2luZG93LmJpbmQoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBXaXRoIElPUzUgZm9yY2UgbG9hZGluZyBpbWFnZXMgd2hlbiBuYXZpZ2F0aW5nIHdpdGggYmFjayBidXR0b24uICovXHJcbiAgICAgICAgLyogTm9uIG9wdGltYWwgd29ya2Fyb3VuZC4gKi9cclxuICAgICAgICBpZiAoKC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikpIHtcclxuICAgICAgICAgICAgJHdpbmRvdy5iaW5kKFwicGFnZXNob3dcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50ICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQucGVyc2lzdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKFwiYXBwZWFyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIEZvcmNlIGluaXRpYWwgY2hlY2sgaWYgaW1hZ2VzIHNob3VsZCBhcHBlYXIuICovXHJcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyogQ29udmVuaWVuY2UgbWV0aG9kcyBpbiBqUXVlcnkgbmFtZXNwYWNlLiAgICAgICAgICAgKi9cclxuICAgIC8qIFVzZSBhcyAgJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwge3RocmVzaG9sZCA6IDEwMCwgY29udGFpbmVyIDogd2luZG93fSkgKi9cclxuXHJcbiAgICAkLmJlbG93dGhlZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIGZvbGQ7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICBmb2xkID0gKHdpbmRvdy5pbm5lckhlaWdodCA/IHdpbmRvdy5pbm5lckhlaWdodCA6ICR3aW5kb3cuaGVpZ2h0KCkpICsgJHdpbmRvdy5zY3JvbGxUb3AoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcCArICQoc2V0dGluZ3MuY29udGFpbmVyKS5oZWlnaHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wIC0gc2V0dGluZ3MudGhyZXNob2xkO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLnJpZ2h0b2Zmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZm9sZDtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LndpZHRoKCkgKyAkd2luZG93LnNjcm9sbExlZnQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikud2lkdGgoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCAtIHNldHRpbmdzLnRocmVzaG9sZDtcclxuICAgIH07XHJcblxyXG4gICAgJC5hYm92ZXRoZXRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIGZvbGQ7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS5oZWlnaHQoKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5sZWZ0b2ZiZWdpbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIGZvbGQ7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0ICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS53aWR0aCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmludmlld3BvcnQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xyXG5cclxuICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmxlZnRvZmJlZ2luKGVsZW1lbnQsIHNldHRpbmdzKSAmJlxyXG4gICAgICAgICAgICAhJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmFib3ZldGhldG9wKGVsZW1lbnQsIHNldHRpbmdzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyogQ3VzdG9tIHNlbGVjdG9ycyBmb3IgeW91ciBjb252ZW5pZW5jZS4gICAqL1xyXG4gICAgLyogVXNlIGFzICQoXCJpbWc6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgb3IgKi9cclxuICAgIC8qICQoXCJpbWdcIikuZmlsdGVyKFwiOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIHdoaWNoIGlzIGZhc3RlciAqL1xyXG5cclxuICAgICQuZXh0ZW5kKCQuZXhwcltcIjpcIl0sIHtcclxuICAgICAgICBcImJlbG93LXRoZS1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQuYmVsb3d0aGVmb2xkKGEsIHtcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiYWJvdmUtdGhlLXRvcFwiOiBmdW5jdGlvbihhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhJC5iZWxvd3RoZWZvbGQoYSwge1xyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJyaWdodC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5yaWdodG9mZm9sZChhLCB7XHJcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImxlZnQtb2Ytc2NyZWVuXCI6IGZ1bmN0aW9uKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiaW4tdmlld3BvcnRcIjogZnVuY3Rpb24oYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5pbnZpZXdwb3J0KGEsIHtcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qIE1haW50YWluIEJDIGZvciBjb3VwbGUgb2YgdmVyc2lvbnMuICovXHJcbiAgICAgICAgXCJhYm92ZS10aGUtZm9sZFwiOiBmdW5jdGlvbihhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhJC5iZWxvd3RoZWZvbGQoYSwge1xyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJyaWdodC1vZi1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJsZWZ0LW9mLWZvbGRcIjogZnVuY3Rpb24oYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge1xyXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIEdlbmVyYWwuaW5pdCgpO1xyXG4gICAgSW1hZ2VTbWFydExvYWRlci5pbml0KCk7XHJcbiAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcclxuICAgICAgICBHZW5lcmFsLmFkZEljb25zKCk7XHJcbiAgICAgICAgR2VuZXJhbC5jb21tZW50TG9hZGVyKCk7XHJcblxyXG4gICAgfVxyXG5cclxufSkiXX0=
